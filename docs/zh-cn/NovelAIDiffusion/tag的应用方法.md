# 开始

## 前言

各种tag的作用奇奇怪怪,但每种tag又有什么作用呢,互相之间会产生什么奇妙的效果,又或者产生冲突使咒语失效,毕竟咒语`prompt`施法法术位只有75,更新后只有150个法术位,想要准确描述一副画面,当前有效词越多越好,能尽量少的做无用功或者多余词语污染prompt

经过自己尝试跑Stable Diffusion Web 集成的deepbooru,了解到其实每个tag都占据不同的法术位,自己跑特定单词消耗的法术位还可以自己设定.所以我脑补了一下,消耗的法术位越多,效果就应该越强,对画面内容的影响就越大.

防护词`Negative prompt`,可以引导AI避免跑向我们不需要的方向,相比正面词,负面词的容量就很大了,WEBUI上甚至没有直接限制防护词的使用个数,但这也不代表我们要无限制的叠防护词,因为这个AI对使用者来说基本是个黑盒,限制了负面词也会影响正面词,它们之间不知道会有什么关联.

`Negative prompt`与其说是屏蔽,不如说是降低这些关键词的权重,不要让它们出现在我想要的画面里

## 几种不同类型括号的使用

`{}`权重*1.05,`()`权重*1.1,`[]`权重除以1.1,所有括号都可以叠加多层.这个结论是从各处收集到的,咱也没有准确测试过

`()`比较特殊,它还可以以精确数值的形式赋予权重比如`(tag:1.21)`,还可以让两个tag融合并调整比重`(tag1:tag2:0.8)`,数值越大,后面的tag占比就越高,通常用来融合`style`

还有一种特殊的融合 `(1girl:0.9 )dog hybrid`将两个物种融合在一起,其实也并不总是成功的,而且也可以 `{1girl}cat hybrid`这样写,此时防护词就得减少些了,融合两个物种极大可能与防护词冲突了,属实是黑魔法.

此部分灵感参考 [**粉毛女路人(换装人偶)的魔咒教室**](https://www.yuque.com/longyuye/lmgcwy/goa36x)和我本身对括号的了解与试验.这个up整理了相当多使用tag搭配方式,可以去看看.

## 咒语`prompt`的冲突

按照生活常识,人不能做到既躺又站,如果给AI同时赋予从常识上就冲突的咒语,AI就会陷入混沌,有可能出来只满足其中一条的图,也有可能试图让两个都满足而产生的多了手脚的bug.所以在念咒之前,先考虑下咒语词之间会不会相互冲突吧.

## 调整咒语

关于我生成了一张可以达到我90%需求的图,但就差了那么一点,多了点不应该存在的东西,颜色偏了一点点,好难受,重新抽卡又无法得到满意的结果.

那就让我们试着固定`Seed`然后微调测试一下吧.

固定seed后,调整一些tag画面不会发生巨大的变动,具体哪些tag会让画面剧变不可控,那得自己试试了,tag太多,实在难以面面俱到的测试,不过我自己使用的过程中也总结了一些

**调整关键词的前后顺序会影响结果**

>  大概可以分为以下几类,更详细的可以参考D站的标签分类

**饰品:** 画面的整体布局不会变,但是背景可能会有轻微的变化,对画面影响较小

**衣服:**会影响人物动作和表情,甚至整个画面氛围

**动作:**变化幅度比较小的,比如双手垂下变为双手抱在身前,画面变化很小,几乎不会产生额外的影响,但是从站着变成坐着或躺着,画面也为了能使动作更合理产生较大幅度的变化,如果没能搭配好很可能产生bug,比如多点手腿之类的

**表情:**对画面影响很小,基本就是改变下表情,但也会有部分表情让肢体动作改变

**艺术家:**加上某个大佬的名字,画风就会偏向她,但前面设定好的画面几乎不变

**外貌特征:**比如变个猫耳,精灵耳,通常变化不大,但有时会改变动作,也可能无事发生,调整权重可以加上去,画面可能变化巨大

**种族:**类人种族对画面影响很小,但体型与人差距较大的种族影响也很大,也可能无事发生,调整权重会使画面剧变

**属性:**这幅画是做什么用的,比如CG,漫画,写实,壁纸,草稿,油画等等.通常画面构图不会有太多变化,但有的属性也可能剧变

**颜文字:**可以通过颜文控制角色表情,没想到吧,通常对构图无影响

**服装风格:**比如哥特,洛丽塔,对构图影响不大,似乎所有风格类的影响都挺小

> 了解了各种类型的咒语对画面的影响,接下来就可以开始愉快的吟唱了!